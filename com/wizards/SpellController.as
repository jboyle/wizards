package com.wizards{		import flash.display.MovieClip;		public class SpellController extends MovieClip	{		private var _activeId:int;		private var _activeSpell:Spell;		private var _spellCreatorDelegate:SpellCreatorDelegate;		private var _crossHairClip:MovieClip;				private var _levelController:LevelController;				public function SpellController(levelController)		{			super();			_activeId = -1;			_activeSpell = null;			_spellCreatorDelegate = new SpellCreatorDelegate(); 						_levelController = levelController;			_crossHairClip = new CrosshairClip();		}				public function startCast(id:int){			if(id != -1){				_activeSpell = _spellCreatorDelegate.createSpell(id);				addChild(_crossHairClip);				addChild(_activeSpell);			}		}				public function stopCast(){			removeChild(_activeSpell);			removeChild(_crossHairClip);			_activeSpell = null;		}				public function update(){			var nId = -1;			if(WizardsG.ACTIVE_MARKER != null){				nId = WizardsG.ACTIVE_MARKER.codeId;			}			//trace("activeID: "+_activeId+", nID: "+nId);			if(_activeId != nId){				if(_activeId != -1){					stopCast();				}				_activeId = nId;				startCast(_activeId);			}									if(_activeSpell != null && WizardsG.CROSSHAIR_POINT != null){				_crossHairClip.x = WizardsG.CROSSHAIR_POINT.x;				_crossHairClip.y = WizardsG.CROSSHAIR_POINT.y;				//trace(_crossHairClip.x +" "+_crossHairClip.y);				_activeSpell.target = _levelController.getSpellCollision(WizardsG.CROSSHAIR_POINT.x, WizardsG.CROSSHAIR_POINT.y);				_activeSpell.update();			}		}	}}